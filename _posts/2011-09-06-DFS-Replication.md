---
layout: post
title: DFS Replication или как обезопасить себя от потери файлов
categories:
-it
---    
Неделю назад я уронил файловый сервер. Уронил так что большинство файлов пришлось выковыривать из дреееевнего бэкапа.
Очень неприятно для меня как для системного администратора и вообще неприятно для компании.
Всвязи с этим была настроена Windows Backup Server и натравлена на свеже установленный сервер.
Теперь бэкапы делаются два раза в сутки - в 4 утра и в 2 часа дня. Бэкапы делаются из shadow copy на внешний носитель по USB.
Решение так себе но в целом отвечает необходимым требованиям.
Однако фирма растёт и требуется всё больше места для файлов. Возникла идея развернуть DFS в рамках компании и по тихоньку перевести всех на эту DFS. Хочется чтобы при моих эксперементах с серверами данные не терялись.
Что такое DFS?
<b>D</b>istributed <b>F</b>ile <b>S</b>ystem - <b>Р</b>аспределённая <b>Ф</b>айловая <b>С</b>истема - такая система при которой одна логическая расшаренная папка это сразу несколько физических папок на разных серверах.
Стоит наверное всётаки сначала дать определения:
Узловой сервер — сервер домена, на котором располагается корень DFS. Можно реплицировать корень DFS, создав корневые целевые папки на других серверах домена. Это обеспечит доступ к файлам при отключении узлового сервера.
Пространство имен - или корень DFS, особое имя используемое пользователями для доступа к файловым ресурсам.
Целевая папка - расшаренная папка на файловом сервере к которой происходит доступ.
Папка - ссылка в пространестве имен указывающая на целевую папку.
Таким образом можно создать отказоустойчивую систему, при падении одного из узлов которой, остальные узлы не пострадают.
С завтрашнего дня я всю эту шарманку начну заводить по своим серверам. В качестве основного сервера у меня будет выступать Windows Server 2008 R2, а файлы будут реплицироваться сразу по трём остальным серверам, один из которых Ubuntu 10.04 LTS.
 